<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:fragment="summary">
<head>

<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">

<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script
	src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

<script type="text/javascript"
	src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.3.0/mdb.min.js"></script>
<!-- Include Feather Icons -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>



<style>
body {
	background-color: lightgrey;
	overflow-x: hidden;
}

.card {
	box-shadow: 0 0.15rem 1.75rem rgba(0, 0, 0, 0.15);
	border-radius: 0.5rem;
}

.stat {
	font-size: 24px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.carousel-item {
	text-align: center;
}

.chart-container {
	position: relative;
	width: 100%;
	height: 300px;
}

.table {
	margin-top: 20px;
}

.text-end {
	text-align: right;
}

.card-box {
	background-color: #d9dbdc;
	background-clip: border-box;
	padding: 1.1rem;
	margin-bottom: 24px;
	border-radius: .25rem;
}

button {
	background-color: #616c77;
	color: white;
	padding: 16px 20px;
	border: none;
	cursor: pointer;
	opacity: 0.8;
	bottom: 23px;
	right: 28px;
	width: 150px;
}

.container-manager {
	padding-right: 15px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: 17.3%;
	margin-top: 80px;
}

.content-page {
	margin-left: 55px;
	overflow: hidden;
	padding: 0 15px 65px 15px;
	min-height: 80vh;
	margin-top: 101px;
}

.input-card {
	border: 1px solid #ccc;
	border-radius: 50%;
	padding: 20px;
	background-color: transparent;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	transition: box-shadow 0.3s ease;
	width: 170px;
	height: 170px;
	text-align: center;
	display: flex;
	justify-content: center;
	color: rgb(0, 177, 157);
	margin-top: 40px;
	margin-bottom: 45px;
}

.input-card:hover {
	box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.scroll {
	max-height: 100vh;
	overflow-y: auto;
	overflow-x: hidden;
}

.main-container {
	width: 100%;
	display: flex;
	justify-content: flex-end; /* Align to the right */
}

.search-container {
	width: 20%; /* 30% width for the search container */
	margin-right: 15px; /* Add some margin for spacing */
	padding: 10px;
}

.result-list {
	max-height: 100px;
	overflow-y: auto;
	max-height: 200px;
	overflow-y: auto;
	border: 1px solid #ccc;
	border-radius: 5px;
}

.list-group-item {
	background-color: #e5e9ec;
}

#results {
	position: absolute;
	/* Position the list absolute to prevent layout shifts */
	max-height: 300px; /* Set a maximum height for the results list */
	overflow-y: auto; /* Enable vertical scrolling */
	margin-top: 10px; /* Small gap between input field and results */
	display: none; /* Initially hide the results container */
	background-color: #ffffff;
	/* Set background color of the list to white */
	border: 1px solid #ddd; /* Add a border for better visibility */
	border-radius: 4px; /* Slight border radius */
	z-index: 100; /* Ensure it appears above other elements */
}

/* Make each item in the results list have a background color */
.list-group-item {
	background-color: #ffffff !important;
	/* White background for each item */
	cursor: pointer; /* Change cursor to pointer on hover */
}

/* Optional: Highlight a list item when hovering */
.list-group-item:hover {
	background-color: #f1f1f1; /* Light grey on hover */
}

.tablinks {
	width: 200px;
	height: 40px;
	background-color: #7b838b;
	color: white;
	border: none;
	cursor: pointer;
	font-size: 16px;
	margin: 0 10px;
	border-radius: 5px; /* Rounded corners */
	transition: background-color 0.3s;
}

/* Style for active button */
.tablinks.active {
	background-color: #018398; /* Darker shade when active */
}

.chart-bar {
	width: 100% !important;
	height: 100% !important;
}

#static-legend {
	display: flex;
	justify-content: center; /* Center the items horizontally */
	align-items: center; /* Center the items vertically */
	width: 100%;
	padding-top: 10px; /* Optional: Space above the legend */
	padding-bottom: 10px; /* Optional: Space below the legend */
}

.legend-item {
	margin-right: 20px; /* Space between legend items */
	display: flex;
	align-items: center;
}

.legend-color {
	width: 20px;
	height: 20px;
	margin-right: 10px;
	border-radius: 3px; /* Optional: rounded corners */
}
</style>

</head>


<body>
	<div th:insert="MMenupage :: header"></div>

	<div class="container-manager">
		<div class="content-page" style="height: 100%;">

			<div
				style="text-align: center; font-weight: bold; font-size: xx-large; padding-bottom: 10px;">
				Merchant Statistics</div>
			<div id="top-row" style="display: flex;">
				<div id="merchant-header"
					style="padding: 15px; width: 25%; text-align: center; margin-left: 8%; font-size: larger; font-weight: 500;"></div>
				<div style="width: 25%; padding: 15px; margin-left: 10%">

<!-- initializeChart('cummulativeChart', backendData.cummulative.labels, allBackendDatas[random()-1].cummulative.datasets); -->

					<select id="filterInput" class="form-control form-control-sm" onchange="loadRandomChart()"
						name="merchandId">
						<option value="">Select</option>
						<th:block th:each="merchant : ${merchantCateg}">
							<option th:value="${merchant.code}"
								th:text="${merchant.code + ' - ' + merchant.desc}"></option>
						</th:block>
					</select>


					<!-- Results Container -->
					<!-- <ul id="results" class="list-group result-list"
						style="width: 250px;"></ul> -->
				</div>
				<div class="row formline " id="tabs"
					style="display: flex; width: 50%; justify-content: flex-end; align-items: center;">
					<button class="tablinks active" id="smooth1View"
						onclick="changeColorView(this, 'Cummulative')">Cummulative</button>
					<button class="tablinks" id="smooth2View"
						onclick="changeColorView(this, 'Progressive')">Month Wise</button>
				</div>
			</div> 

			<div class="row ">
				<div class="col-lg-5 col-md-12 mb-4"> 
					<div class="card-body card-body px-2 pt-lg-6 ">
						<div class="row ">
							<div class="col-lg-12 my-auto text-center d-lg-block d-flex justify-content-center"> 
								<div id="chart-pie"></div> 
							</div>
						</div>
					</div>
				</div>
				<!-- Second Card: Sales Overview --> 
				<div class="col-lg-7 col-md-12" > 
					<div class="card-body ">
						<div class="chart-container" id="Cummulative"> 
							<canvas id="cummulativeChart"></canvas>
						</div>
						<div class="chart-container" id="Progressive"
							style="display: none;"> 
							<canvas id="progressiveChart"></canvas>
						</div>
					</div> 
				</div>
				<hr style="border: 1px solid #7b838b; width: 100%;"> 
				<div style="width: 100%; display: flex;">
					<!-- Left side: All Merchants -->
					<div
						style="width: 50%; text-align: center; padding-bottom: 15px; display: flex; justify-content: center; align-items: center;">
						<span style="font-size: 1.25rem; font-weight: bold;">All
							Merchants</span>
					</div> 
					<!-- Right side: Merchant Wise + Select -->
					<div
						style="width: 50%; text-align: center; padding-bottom: 15px; display: flex; justify-content: center; align-items: center; gap: 10px;">
						<span style="font-size: 1.25rem; font-weight: bold;">Merchant
							Wise</span> <select id="filterInput" onchange="MerchantChange()"
							class="form-control form-control-sm" name="merchandId"
							style="width: auto;">
							<option value="">Select</option>
							<th:block th:each="merchant : ${merchantIds}">
							<option th:value="${merchant.Id}"
								th:text="${merchant.Id + ' - ' + merchant.Name}"></option>
						</th:block>
						</select>
					</div>
				</div>

				<div style="width: 100%; display: flex;" class="mt-2">
					<div
						style="width: 50%; text-align: center; padding-bottom: 15px; display: flex;">
						<div class="insert-date"
							style="font-size: larger; font-weight: 500; width: 50%; text-align: center;"></div>
						<div
							style="font-size: larger; font-weight: 500; width: 50%; text-align: center;">
							<select class="month-dropdown"
								onchange="updateSelectedMonthYear(this)">
								<!-- Month options will be added dynamically -->
							</select> <select class="year-dropdown"
								onchange="updateSelectedMonthYear(this)">
								<!-- Year options will be added dynamically -->
							</select>
							<!-- <div class="selected-month-year-display"
								style="margin-top: 10px;"></div> -->
						</div>
					</div>
					<div
						style="width: 50%; text-align: center; padding-bottom: 15px; display: flex;">
						<div class="insert-date"
							style="font-size: larger; font-weight: 500; width: 50%; text-align: center;"></div>
						<div
							style="font-size: larger; font-weight: 500; width: 50%; text-align: center;">
							<select class="month-dropdown"
								onchange="updateSelectedMonthYear(this)">
								<!-- Month options will be added dynamically -->
							</select> <select class="year-dropdown"
								onchange="updateSelectedMonthYear(this)">
								<!-- Year options will be added dynamically -->
							</select>
							<div class="selected-month-year-display"
								style="margin-top: 10px;"></div>
						</div>
					</div>
				</div>






				<div class="row " style="height: 100%; width: 100%">

					<!-- Each chart represents one month -->
					<div class="chart col-lg-3" id="chart-jan">
						<canvas id="chart-bars-jan" class="chart-bar chart-canvas"></canvas>
					</div>
					<div class="chart col-lg-3" id="chart-feb">
						<canvas id="chart-bars-feb" class="chart-bar chart-canvas"></canvas>
					</div>
					<div class="chart col-lg-3" id="chart-mar">
						<canvas id="chart-bars-mar" class="chart-bar chart-canvas"></canvas>
					</div>
					<div class="chart col-lg-3" id="chart-apr">
						<canvas id="chart-bars-apr" class="chart-bar chart-canvas"></canvas>
					</div>

					<!-- Static legend container: Centered in one row -->
					<div
						class="col-12 d-flex justify-content-center align-items-center"
						id="static-legend">
						<div class="legend-item">
							<span class="legend-color" style="background-color: #cb9cb3;"></span>
							No. of Merchants
						</div>
						<div class="legend-item">
							<span class="legend-color" style="background-color: #fb6340;"></span>
							Vol. of Trans.
						</div>
						<div class="legend-item">
							<span class="legend-color" style="background-color: #36a2eb;"></span>
							No. of Trans.
						</div>


					</div>

				</div>



				<!-- End of Row -->
			</div>
		</div>


		<div id="myModalpopup" class="modal" data-backdrop="static"
			data-keyboard="false">
			<div class="modal-content"
				style="width: 1000px; margin-top: 90px; margin-left: 650px; text-align: center">
				<div class="menu-title-header">
					<div class="modal-title pt-2" id="exampleModalLabel"
						style="text-align: center; color: white;">SECURITY QUESTION
						FORM</div>
				</div>
				<div class="modal-body scroll"
					style="text-align: center; background-color: #c6ccd2;">
					<form id="uploadForm1" method="post" autocomplete="off">
						<input type="text" name="flag" id="flag" autocomplete="off"
							th:value="${authenticationValue}"
							class="form-control form-control-sm" hidden="true" />

						<div class="form-group row">
							<label for="user_id" class="col-sm-6 col-form-label">User
								ID <span style="color: red; font-size: 20px;"></span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="user_id" id="user_id"
									autocomplete="off" th:value="${USERID}" readonly
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="username" class="col-sm-6 col-form-label">User
								Name <span style="color: red; font-size: 20px;"></span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="username" id="username"
									th:value="${USERNAME}" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									readonly class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_1" class="col-sm-6 col-form-label">WHAT
								IS YOUR FAVORITE BOOK <span style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_1"
									id="security_answer_1" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_2" class="col-sm-6 col-form-label">WHAT
								IS THE NAME OF THE ROAD YOU GREW UP ON <span
								style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_2"
									id="security_answer_2" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_3" class="col-sm-6 col-form-label">WHAT
								IS YOUR FAVORITE PET <span style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_3"
									id="security_answer_3" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_4" class="col-sm-6 col-form-label">WHAT
								WAS THE FIRST COMPANY THAT YOU WORKED FOR <span
								style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_4"
									id="security_answer_4" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_5" class="col-sm-6 col-form-label">WHAT
								IS YOUR MOTHER'S NAME <span style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_5"
									id="security_answer_5" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_6" class="col-sm-6 col-form-label">WHAT
								IS YOUR DATE OF BIRTH <span style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_6"
									id="security_answer_6" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_7" class="col-sm-6 col-form-label">WHAT
								IS YOUR FAVORITE SCHOOL TEACHER'S NAME <span
								style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_7"
									id="security_answer_7" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_8" class="col-sm-6 col-form-label">WHAT
								IS YOUR FAVORITE MOVIE <span
								style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_8"
									id="security_answer_8" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_9" class="col-sm-6 col-form-label">WHAT
								WAS YOUR FIRST VEHICLE <span
								style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_9"
									id="security_answer_9" autocomplete="off"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="form-group row">
							<label for="security_answer_10" class="col-sm-6 col-form-label">WHAT
								CITY WERE YOU BORN IN <span style="color: red; font-size: 20px;">*</span>
							</label>
							<div class="col-sm-6">
								<input type="text" name="security_answer_10"
									id="security_answer_10"
									onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
									class="form-control form-control-sm" required />
							</div>
						</div>

						<div class="text-center">
							<button type="button" class="btn btn-primary"
								onclick="add1submit();">Submit</button>
							<button type="button" class="btn btn-primary"
								onclick="backpopup()">Back</button>
						</div>
					</form>
				</div>
			</div>
		</div>


		<div class="modal fade" id="changepassword1" data-backdrop="static"
			data-keyboard="false">
			<div
				class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content" style="color: cadetblue;">
					<!-- Modal Header -->
					<div class="menu-title-header">
						<div class="modal-title" id="exampleModalLabel"
							style="text-align: center; color: white;">CHANGE PASSWORD</div>
					</div>
					<div class="modal-body"
						style="text-align: center; background-color: #c6ccd2">
						<form th:object="${passform}" id="passFormNew" method="post">
							<div class="form-group">
								<div class="row">
									<label class="col-sm-5">User ID :</label> <input
										autocomplete="off" class="form-control col-sm-5" type="text"
										id="userId" th:value="${USERID}" name="userId" required />
								</div>
								<div class="row">
									<label class="col-sm-5">New Password :</label> <input
										autocomplete="off" class="form-control col-sm-5"
										type="password" id="newpass1" name="newpass1" required />
								</div>
								<div class="row">
									<label class="col-sm-5" for="acctName">Confirm New
										Password :</label> <input class="form-control col-sm-5"
										autocomplete="off" type="password" id="Connpass1"
										name="Connpass1" required />
								</div>
							</div>
						</form>
					</div>
					<div class="modal-footer" style="background-color: #c6ccd2">
						<button type="button" class="btn btn-primary"
							onclick="submitPassword()">Submit</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="popupvalidate" data-backdrop="static"
			data-keyboard="false">
			<div
				class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content" style="color: cadetblue;">
					<!-- Modal Header -->
					<div class="menu-title-header">
						<div class="modal-title" id="exampleModalLabel"
							style="text-align: center; color: white;">VALIDATION</div>
					</div>
					<div class="modal-body"
						style="text-align: center; background-color: #c6ccd2">
						<div class="form-group">
							<div class="row">
								<label class="col-sm-8" for="acctName">Fill THE REQUIRD
									FIELD</label>
							</div>
						</div>
					</div>
					<div class="modal-footer" style="background-color: #c6ccd2">
						<button type="button" class="btn btn-primary"
							onclick="closeModal()">CLOSE</button>
					</div>
				</div>
			</div>
		</div>
	</div>


    <script th:inline="javascript">
	/*<![CDATA[*/

	// SUBMIT SECURITY ANSWER
	function add1submit() {
		var hasError = 0;
		for (var i = 1; i <= 10; i++) {
			var securityAnswer = $("#security_answer_" + i).val().trim();
			if (securityAnswer === "") {
				hasError += 1;
			} else {
				hideError($("#security_answer_" + i));
			}
		}
		if (hasError > 7) {
			alert("Please fill at least three answers!");
		} else {
			var formData = $("#uploadForm1").serialize();
			$.ajax({
				url : './submitdashboard',
				data : formData,
				type : 'POST',
				success : function(response) {
					var responseObject = typeof response === 'string' ? JSON.parse(response) : response;
					if (responseObject.authenticate_flg === "Y") {
						$("#myModalpopup").css("display", "none");
						$('#changepassword1').modal('show');
					} else {
						alert("Authentication failed.");
					}
				},
				error : function(xhr, status, error) {
					console.error("Error:", error);
					alert("Failed to submit form. Please try again.");
				}
			});
		}
	}

	// CHANGE PASSWORD

	function submitPassword() {
		if ($("#passSubmitForm").valid()) {
			var newpass = $("#newpassData").val();
			var conpass12 = document.getElementById("conpass").value;
			var userid = $("#userId").val();
			if (newpass.length > 6) {
				if (newpass === conpass12) {
					$.ajax({
						type : "post",
						cache : false,
						url : './changePasswordwithoutoldpassword',
						data : {
							userid : userid,
							newpass : newpass
						},
						success : function(data) {
							$('#changepassword1').modal('hide');
							$('#myModalpopup2').modal("toggle");
							$('#myModalpopup2 .modal-body').text(data);
						},
						error : function(xhr, status, error) {
							alert("Error changing password. Please try again.");
						}
					});
				} else {
					alert("New Password and Confirm Password must match.");
				}
			} else {
				alert("Password requires at least one Uppercase, Lowercase, Numeric and minimum 6.");
			}
		}
	}

	function togglePasswordVisibility(inputId, eyeImgId) {
		const passwordInput = document.getElementById(inputId);
		const eyeImg = document.getElementById(eyeImgId);
		if (passwordInput.type === 'password') {
			passwordInput.type = 'text';
			eyeImg.src = '/IPSAdmin/Image/eyeSlide.png';
			eyeImg.title = "Hide Password";
		} else {
			passwordInput.type = 'password';
			eyeImg.src = '/IPSAdmin/Image/eye.png';
			eyeImg.title = "Show Password";
		}
	}

	$(document).ready(function() {
		$(window).keydown(function(event) {
			if (event.keyCode == 13) {
				event.preventDefault();
				return false;
			}
		});
	});

	$(document).ready(function() {
		var countsuccess = /*[[${countsuccess}]]*/0;
		var countfailure = /*[[${countfailure}]]*/0;
		var countinitiated = /*[[${countinitiated}]]*/0;
		var countzero = /*[[${countzero}]]*/0;

		var data, sliceColors;

		if (countsuccess === 0 && countfailure === 0 && countinitiated === 0) {
			data = [ countsuccess, countfailure, countinitiated, countzero ];
			sliceColors = [ "#77b179", "#ff8f9f", "#8a929a", "#f7bb86" ];
		} else {
			data = [ countsuccess, countfailure, countinitiated ];
			sliceColors = [ "#77b179", "#ff8f9f", "#8a929a" ];
		}

		$("#INC1").sparkline(data, {
			type : "pie",
			width : "210",
			height : "210",
			sliceColors : sliceColors
		});

		var resizeTimeout;
		$(window).resize(function() {
			clearTimeout(resizeTimeout);
			resizeTimeout = setTimeout(function() {
				$("#INC1").sparkline(data, {
					type : "pie",
					width : "210",
					height : "210",
					sliceColors : sliceColors
				});
			}, 300);
		});
	});

	$(document).ready(function() {
		var CountVerifiedMerchant = /*[[${CountVerifiedMerchant}]]*/0;
		var CountUnverifiedMerchant = /*[[${CountUnverifiedMerchant}]]*/0;

		var data, sliceColors;

		if (CountVerifiedMerchant === 0 && CountUnverifiedMerchant === 0) {
			data = [ CountVerifiedMerchant, CountUnverifiedMerchant ];
			sliceColors = [ "#77b179", "#ff8f9f" ];
		} else {
			data = [ CountVerifiedMerchant, CountUnverifiedMerchant ];
			sliceColors = [ "#77b179", "#ff8f9f" ];
		}

		$("#INC").sparkline(data, {
			type : "pie",
			width : "210",
			height : "210",
			sliceColors : sliceColors
		});

		var resizeTimeout;
		$(window).resize(function() {
			clearTimeout(resizeTimeout);
			resizeTimeout = setTimeout(function() {
				$("#INC1").sparkline(data, {
					type : "pie",
					width : "210",
					height : "210",
					sliceColors : sliceColors
				});
			}, 300);
		});
	});

	function change() {
		$('#changepassword1').modal('show');
	}

	function openModal() {
		var modal = document.getElementById("myModalpopup");
		var flag = document.getElementById("flag").value;
		if (flag === "N") {
			modal.style.display = "block";
		} else {
			modal.style.display = "none";
		}
	}

	window.onload = function() {
		openModal();
	};

	function closeModal() {
		var modal = document.getElementById("popupvalidate");
		modal.style.display = "none";
	}

	function showError(element, message) {
		var errorSpan = $('<span class="error-message"></span>').text(message);
		errorSpan.css({
			'color' : 'red',
			'font-size' : '13px',
			'margin-top' : '10px',
			'margin-left' : '250px'
		});
		element.next('.error-message').remove();
		element.after(errorSpan);
	}

	function hideError(element) {
		element.next('.error-message').remove();
	}

	function backpopup() {
		window.location.href = './login';
	}
    // Simulate a click on the Cummulative button on page load to make it active
    window.onload = function() {
        const cummulativeButton = document.getElementById('smooth1View');
        changeColorView(cummulativeButton, 'Cummulative');  // Make "Cummulative" chart visible and the button active
    };

    // Function to switch between charts and change the button colors
    function changeColorView(button, chartType) {
        // Hide both charts
        document.getElementById('Cummulative').style.display = 'none';
        document.getElementById('Progressive').style.display = 'none';

        // Show the selected chart
        document.getElementById(chartType).style.display = 'block';

        // Remove the 'active' class from all buttons
        const buttons = document.querySelectorAll('.tablinks');
        buttons.forEach(btn => {
            btn.classList.remove('active');
        });

        // Add the 'active' class to the clicked button to change its color
        button.classList.add('active');
    }
function insertDate() {
    const today = new Date();
    const currentYear = today.getFullYear();

    // Format the start date: 01-01-currentYear
    const startDate = `01-01-${currentYear}`;

    // Format today's date as dd-mm-yyyy
    const todayDate = `${String(today.getDate()).padStart(2, '0')}-${String(today.getMonth() + 1).padStart(2, '0')}-${currentYear}`;

    // Update all elements with the class "insert-date"
    const dateElements = document.querySelectorAll('.insert-date');
    dateElements.forEach((element) => {
			console.log(element);
        element.innerHTML = `Data From ${startDate} to ${todayDate}`;
    });

    // Populate dropdowns
    populateMonthDropdowns();
}

function populateDropdowns() {
    const monthDropdowns = document.querySelectorAll('.month-dropdown');
    const yearDropdowns = document.querySelectorAll('.year-dropdown');

    // Get current month and year
    const currentDate = new Date();
    const currentMonth = currentDate.getMonth() + 1; // getMonth() returns 0-11
    const currentYear = currentDate.getFullYear();

    // Populate months
    const months = [
        'January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'
    ];
    monthDropdowns.forEach((dropdown) => {
        months.forEach((month, index) => {
            const option = document.createElement('option');
            option.value = index + 1;
            option.textContent = month;
            if (index + 1 === currentMonth) {
                option.selected = true; // Set current month as selected
            }
            dropdown.appendChild(option);
        });
    });

    // Populate years
    const yearRange = 200;
    yearDropdowns.forEach((dropdown) => {
        for (let year = currentYear - yearRange; year <= currentYear + yearRange; year++) {
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            if (year === currentYear) {
                option.selected = true; // Set current year as selected
            }
            dropdown.appendChild(option);
        }
    });
}

let selectedMerchantId = "";

function updateSelectedMonthYear(selectElement) {
    const parentDiv = selectElement.closest('div');
    const monthDropdown = parentDiv.querySelector('.month-dropdown');
    const yearDropdown = parentDiv.querySelector('.year-dropdown');
    const displayDiv = parentDiv.querySelector('.selected-month-year-display');
    const selectedMonth = monthDropdown.value || 'Month';
    const selectedYear = yearDropdown.value || 'Year';

   // displayDiv.innerHTML = `Selected: <strong>${selectedMonth} ${selectedYear}</strong>`;

    // Determine which chart to update
    const index = [...document.querySelectorAll('.month-dropdown')].indexOf(monthDropdown);

    if (index === 0) {
        // Update chart-bars-feb (2nd chart)
        const updatedData = getUpdatedMonthlyData(selectedMonth, selectedYear, selectedMerchantId);
        updateChart('Monthly', 'chart-bars-feb', updatedData);
    } else if (index === 1) {
        // Update chart-bars-apr (4th chart)
        const updatedData = getUpdatedMonthlyData(selectedMonth, selectedYear, selectedMerchantId);
        updateChart('Monthly', 'chart-bars-apr', updatedData);
    }
}


// Populate the dropdowns on page load
document.addEventListener('DOMContentLoaded', populateDropdowns);

function MerchantChange() {
    const merchantSelect = document.getElementById("filterInput");
    selectedMerchantId = merchantSelect.value;

    // Dummy data generation for now — replace with AJAX call to fetch data for merchantId if needed
    const janData = getMerchantChartData("jan", selectedMerchantId);
    const febData = getMerchantChartData("feb", selectedMerchantId);
    const marData = getMerchantChartData("mar", selectedMerchantId);
    const aprData = getMerchantChartData("apr", selectedMerchantId);

    updateChart('Overall', 'chart-bars-jan', janData);
    updateChart('Monthly', 'chart-bars-feb', febData);
    updateChart('Overall', 'chart-bars-mar', marData);
    updateChart('Monthly', 'chart-bars-apr', aprData);
}

function updateChart(monthType, canvasId, data) {
    const canvas = document.getElementById(canvasId);
    if (!canvas) return;

    // Destroy old chart if needed
    if (canvas.chartInstance) {
        canvas.chartInstance.destroy();
    }

    canvas.chartInstance = new Chart(canvas, {
        type: "bar",
        data: {
            labels: [monthType],
            datasets: [
                {
                    label: "No. of Merchants",
                    backgroundColor: "#cb9cb3",
                    data: [data[2]],
                    maxBarThickness: 20
                },
                {
                    label: "Vol. of Trans.",
                    backgroundColor: "#fb6340",
                    data: [data[0]],
                    maxBarThickness: 20
                },
                {
                    label: "No. of Trans.",
                    backgroundColor: "#36a2eb",
                    data: [data[1]],
                    maxBarThickness: 20
                }
            ]
        },
        options: {
            indexAxis: 'x',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    enabled: true,
                    mode: "index",
                    intersect: false,
                    callbacks: {
                        label: function (context) {
                            let label = context.dataset.label || '';
                            let value = context.raw;
                            return label === "Vol. of Trans." ? `${label}: ${value}k` : `${label}: ${value}`;
                        }
                    }
                },
                datalabels: {
                    anchor: 'end',
                    align: 'end',
                    font: { size: 12 },
                    formatter: (value, context) => {
                        return context.dataset.label === "Vol. of Trans." ? value + "k" : value;
                    },
                    color: '#444'
                }
            },
            scales: {
                x: {
                    beginAtZero: true,
                    ticks: { color: "#8898aa" },
                    grid: { color: "rgba(200, 200, 200, 0.3)" }
                },
                y: {
                    ticks: { color: "#8898aa" },
                    grid: { display: false },
                    max: getRelativeMaxValue(data)
                }
            }
        },
        plugins: [ChartDataLabels]
    });
}


function getUpdatedMonthlyData(month, year, merchantId) {
    // Replace this with actual data fetch logic
    return [Math.floor(Math.random() * 100), Math.floor(Math.random() * 100), Math.floor(Math.random() * 100)];
}

function getMerchantChartData(month, merchantId) {
    // Replace this with actual data fetch logic per merchantId
    return [Math.floor(Math.random() * 100), Math.floor(Math.random() * 100), Math.floor(Math.random() * 100)];
}

</script>





	<script>
		feather.replace(); // Replaces placeholder icons with Feather icons
	
		function loadRandomChart() {
		    const randomIndex = Math.floor(Math.random() * allBackendDatas.length); // 0-9
		    const selected = allBackendDatas[randomIndex];

		    // Destroy and draw cummulative chart
		    if (window.lineChartCummulative) {
		        window.lineChartCummulative.destroy();
		    }
		    window.lineChartCummulative = initializeChart('cummulativeChart', selected.cummulative.labels, selected.cummulative.datasets);

		    // Destroy and draw progressive chart
		    if (window.lineChartProgressive) {
		        window.lineChartProgressive.destroy();
		    }
		    window.lineChartProgressive = initializeChart('progressiveChart', selected.progressive.labels, selected.progressive.datasets);

		    // Safely pick a pie chart from backendPieData if available
		    const pieIndex = Math.floor(Math.random() * backendPieData.length);
		    initializePieChart(backendPieData[pieIndex]);
		}

	
	//Line Chart 
	
	
	 // Mock data fetched from the backend
const allBackendDatas = [
    {
        cummulative: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [
                { label: "Units", borderColor: "#cb0c9f", backgroundColor: "rgba(203,12,159,0.2)", data: [12, 18, 25, 35, 45, 55, 55, 55, 55, 55, 55, 55],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Terminals", borderColor: "#3A416F", backgroundColor: "rgba(72,72,176,0.2)", data: [14, 20, 28, 38, 48, 58, 58, 58, 58, 58, 58, 58],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Users", borderColor: "#FFC107", backgroundColor: "rgba(255,193,7,0.2)", data: [16, 22, 30, 40, 50, 60, 60, 60, 60, 60, 60, 60],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
            ],
        },
        progressive: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [
                { label: "Units", borderColor: "#cb0c9f", backgroundColor: "rgba(203,12,159,0.2)", data: [12, 6, 7, 10, 10, 10, 0,0,0,0,0,0],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Terminals", borderColor: "#3A416F", backgroundColor: "rgba(72,72,176,0.2)", data: [14, 6, 8, 10, 10, 10, 0,0,0,0,0,0],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Users", borderColor: "#FFC107", backgroundColor: "rgba(255,193,7,0.2)", data: [16, 6, 8, 10, 10, 10, 0,0,0,0,0,0],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
            ],
        },
    },
    {
        cummulative: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [
                { label: "Units", borderColor: "#cb0c9f", backgroundColor: "rgba(203,12,159,0.2)", data: [5, 10, 15, 20, 25, 30, 35, 35, 35, 35, 35, 35],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Terminals", borderColor: "#3A416F", backgroundColor: "rgba(72,72,176,0.2)", data: [6, 12, 18, 24, 30, 36, 40, 40, 40, 40, 40, 40],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Users", borderColor: "#FFC107", backgroundColor: "rgba(255,193,7,0.2)", data: [8, 14, 20, 26, 32, 38, 42, 42, 42, 42, 42, 42],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
            ],
        },
        progressive: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [
                { label: "Units", borderColor: "#cb0c9f", backgroundColor: "rgba(203,12,159,0.2)", data: [5, 5, 5, 5, 5, 5, 5,  5, 5, 5, 5, 5],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Terminals", borderColor: "#3A416F", backgroundColor: "rgba(72,72,176,0.2)", data: [6, 6, 6, 6, 6, 6, 6, 6,6,6,6,6],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Users", borderColor: "#FFC107", backgroundColor: "rgba(255,193,7,0.2)", data: [8, 6, 6, 6, 6, 6, 6, 6,6,6,6,6],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
            ],
        },
    },
    {
        cummulative: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [
                { label: "Units", borderColor: "#cb0c9f", backgroundColor: "rgba(203,12,159,0.2)", data: [2, 4, 6, 10, 14, 20, 20, 20, 20, 20, 20, 20],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Terminals", borderColor: "#3A416F", backgroundColor: "rgba(72,72,176,0.2)", data: [3, 6, 9, 13, 18, 22, 22, 22, 22, 22, 22, 22],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Users", borderColor: "#FFC107", backgroundColor: "rgba(255,193,7,0.2)", data: [4, 8, 12, 17, 22, 26, 26, 26, 26, 26, 26, 26],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
            ],
        },
        progressive: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [
                { label: "Units", borderColor: "#cb0c9f", backgroundColor: "rgba(203,12,159,0.2)", data: [2, 2, 2, 4, 4, 6, 0,0,0,0,0,0],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Terminals", borderColor: "#3A416F", backgroundColor: "rgba(72,72,176,0.2)", data: [3, 3, 3, 4, 5, 4, 0,0,0,0,0,0],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
                { label: "Users", borderColor: "#FFC107", backgroundColor: "rgba(255,193,7,0.2)", data: [4, 4, 4, 5, 5, 4, 0,0,0,0,0,0],tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true },
            ],
        },
    },
    // Seven more dummy entries will follow the same structure:
    ...Array.from({ length: 7 }).map((_, index) => ({
        cummulative: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [
                {
                    label: "Units",
                    borderColor: "#cb0c9f",
                    backgroundColor: "rgba(203,12,159,0.2)",
                    data: Array.from({ length: 12 }, (_, i) => 10 + i * (index + 1)),tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true 
                },
                {
                    label: "Terminals",
                    borderColor: "#3A416F",
                    backgroundColor: "rgba(72,72,176,0.2)",
                    data: Array.from({ length: 12 }, (_, i) => 12 + i * (index + 2)),tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true 
                },
                {
                    label: "Users",
                    borderColor: "#FFC107",
                    backgroundColor: "rgba(255,193,7,0.2)",
                    data: Array.from({ length: 12 }, (_, i) => 14 + i * (index + 3)),tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true 
                },
            ],
        },
        progressive: {
            labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [
                {
                    label: "Units",
                    borderColor: "#cb0c9f",
                    backgroundColor: "rgba(203,12,159,0.2)",
                    data: Array.from({ length: 12 }, () => Math.floor(Math.random() * 10 + 1)),tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true 
                },
                {
                    label: "Terminals",
                    borderColor: "#3A416F",
                    backgroundColor: "rgba(72,72,176,0.2)",
                    data: Array.from({ length: 12 }, () => Math.floor(Math.random() * 12 + 1)),tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true 
                },
                {
                    label: "Users",
                    borderColor: "#FFC107",
                    backgroundColor: "rgba(255,193,7,0.2)",
                    data: Array.from({ length: 12 }, () => Math.floor(Math.random() * 14 + 1)),tension: 0.4,borderWidth: 0,pointRadius: 0,borderWidth: 3,fill: true 
                },
            ],
        },
    })),
];



	
	
    // Function to initialize a Line chart dynamically
    function initializeChart(canvasId, chartLabels, chartDatasets) {
    	console.log(canvasId, chartLabels, chartDatasets);
        const ctx = document.getElementById(canvasId).getContext('2d');
        return new Chart(ctx, {
            type: 'line',
            data: {
                labels: chartLabels,
                datasets: chartDatasets,
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: "top",
                    },
                },
                interaction: {
                    intersect: false,
                    mode: "index",
                },
                scales: {
                    y: {
                        grid: {
                            drawBorder: false,
                            display: true,
                            drawOnChartArea: true,
                            drawTicks: false,
                            borderDash: [5, 5],
                        },
                        ticks: {
                            display: true,
                            padding: 10,
                            color: "#b2b9bf",
                            font: {
                                size: 11,
                                family: "Open Sans",
                            },
                        },
                    },
                    x: {
                        grid: {
                            drawBorder: false,
                            display: false,
                            drawOnChartArea: false,
                            drawTicks: false,
                            borderDash: [5, 5],
                        },
                        ticks: {
                            display: true,
                            color: "#b2b9bf",
                            padding: 20,
                            font: {
                                size: 11,
                                family: "Open Sans",
                            },
                        },
                    },
                },
            },
        });
    }
    
    function random() {
        // Return an array of 3 random integers between 1 and 10
        const val=Math.floor(Math.random() * 10) + 1;
        console.log(val);
        return val;
    }

    
    let backendPieData = [
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [35, 25, 40],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [20, 50, 30],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [45, 35, 20],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [10, 40, 50],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [33, 33, 34],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [60, 25, 15],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [50, 30, 20],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [25, 25, 50],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [40, 30, 30],
            colors: ['#28a745', '#6c757d', '#dc3545']
        },
        {
            labels: ['Merchants', 'Units', 'Users'],
            series: [30, 50, 20],
            colors: ['#28a745', '#6c757d', '#dc3545']
        }
    ];


    let chartPieInstance = null;
    
    function initializePieChart(data) {
        console.log('hello');
        console.log(data);

        // Destroy existing chart if it exists
        if (chartPieInstance) {
            chartPieInstance.destroy();
        }

        // Create new chart instance
        chartPieInstance = new ApexCharts(
            document.querySelector("#chart-pie"),
            {
                chart: {
                    type: 'donut',
                    height: 300,
                },
                dataLabels: {
                    enabled: false,
                },
                plotOptions: {
                    pie: {
                        customScale: 1,
                        expandOnClick: false,
                        donut: {
                            size: "80%",
                        },
                    },
                },
                legend: {
                    show: true,
                    position: "right",
                    formatter: function (seriesName, opts) {
                        const value = opts.w.globals.series[opts.seriesIndex];
                        return seriesName + ": " + value;
                    },
                    labels: {
                        useSeriesColors: true,
                    },
                },
                series: data.series,
                labels: data.labels,
                colors: data.colors || ['#28a745', '#6c757d', '#dc3545'],
                responsive: [
                    {
                        breakpoint: 1550,
                        options: {
                            chart: {
                                height: 340,
                            },
                            legend: {
                                position: "bottom",
                                verticalAlign: "bottom",
                            },
                        },
                    },
                    {
                        breakpoint: 1450,
                        options: {
                            chart: {
                                height: 300,
                            },
                        },
                    },
                ],
            }
        );

        // Render the new chart
        chartPieInstance.render();
    }

 

    window.onload = function () {
        $.ajax({
            url: './GetPieCount',
            type: 'GET',
            success: function (response) {
                // Ideally you assign response to backendPieData dynamically here if not hardcoded
                // backendPieData = response;
                initializePieChart(backendPieData[0]);
            },
            error: function (error) {
                console.error("Error:", error);
                alert("Failed to fetch pie data.");
            }
        });

        // Initialize line charts with default backendData
        window.lineChartCummulative = initializeChart('cummulativeChart', allBackendDatas[0].cummulative.labels, allBackendDatas[0].cummulative.datasets);
        window.lineChartProgressive = initializeChart('progressiveChart', allBackendDatas[0].progressive.labels, allBackendDatas[0].progressive.datasets);

        updateMerchantHeader();
        insertDate();
    };

    
    
    
    

    /**
     * Updates the merchant header with today's date.
     */
    function updateMerchantHeader() {
    const date = new Date();
    const formattedDate = `${String(date.getDate()).padStart(2, '0')}-${String(date.getMonth() + 1).padStart(2, '0')}-${date.getFullYear()}`;
    
    document.getElementById('merchant-header').innerHTML = `Merchants - ${formattedDate}`;
}





      

	var data = /*[[${merchantid}]]*/ '[[${merchantid}]]'.split(',');

	// Log merchant IDs (optional for debugging)
	for (let i = 0; i < data.length; i++) {
	    console.log("Merchant ID #" + (i + 1) + ": " + data[i]);
	}

	const filterInput = document.getElementById("filterInput");
	const resultsContainer = document.getElementById("results");
	console.log(resultsContainer)

	// Function to filter results based on user input
	function filterResults(query) {
	    return new Promise((resolve) => {
	        setTimeout(() => {
	            const filteredData = data.filter(item => 
	                item.toLowerCase().includes(query.toLowerCase())
	            );
	            resolve(filteredData);
	        }, 300); // Simulated delay for better UX
	    });
	}

	// Function to render filtered results in the list
	function renderResults(filteredData) {
	    resultsContainer.innerHTML = ""; // Clear previous results
	    console.log(resultsContainer)
	    if (filteredData.length === 0) {
	        resultsContainer.innerHTML = "<li class='list-group-item text-muted'>No results found</li>";
	        return;
	    }
	    filteredData.forEach(item => {	
	        const li = document.createElement("li");
	        li.className = "list-group-item";
	        li.textContent = item;
	        
	        // Add click event listener to update charts and hide the list
	        li.addEventListener("click", () => {
	            // Randomly select new data for both charts
	            const randomLineDataIndex = Math.floor(Math.random() * lineChartData.length);
	            const randomPieDataIndex = Math.floor(Math.random() * pieChartData.length);
	            const randomtranDataIndex = Math.floor(Math.random() * transdata.length);

	            // Update Line Chart
	            lineChart.data.datasets.forEach((dataset, index) => {
	                dataset.data = lineChartData[randomLineDataIndex].data[index]; // Set new data for each dataset
	            });
	            lineChart.update();

	            // Update Pie Chart
	            chartPie.updateSeries(pieChartData[randomPieDataIndex]); // Update the pie chart dynamically
	            
	            
	            const data = transdata[randomtranDataIndex];  // Get data based on the random index

	            // Update Transaction Cards with random data
	            document.getElementById('total-transaction-value').innerText = data.totalTransaction.value;
	            document.getElementById('total-transaction-percentage').innerHTML = `<i data-feather="arrow-down-right"></i> ${data.totalTransaction.percentage}`;

	            document.getElementById('transactions-value').innerText = data.transactions.value;
	            document.getElementById('transactions-percentage').innerHTML = `<i data-feather="arrow-up-right"></i> ${data.transactions.percentage}`;

	            document.getElementById('chargeback-value').innerText = data.chargeBack.value;
	            document.getElementById('chargeback-percentage').innerHTML = `<i data-feather="arrow-down-right"></i> ${data.chargeBack.percentage}`;

	            document.getElementById('hold-reject-value').innerText = data.holdReject.value;
	            document.getElementById('hold-reject-percentage').innerHTML = `<i data-feather="arrow-up-right"></i> ${data.holdReject.percentage}`;


	            // Hide the results list and clear the input field
	            resultsContainer.style.display = "none";
	            filterInput.value = ""; // Clear the input field

	            console.log("Input Value cleared: " + filterInput.value);
	        });
	        
	        resultsContainer.appendChild(li);
	    });
	}

	// Event listener for input field to filter results as the user types
	filterInput.addEventListener("input", (e) => {
	    const query = e.target.value;
	    if (query.trim() === "") {
	        resultsContainer.innerHTML = ""; // Clear results if input is empty
	        resultsContainer.style.display = "none"; // Hide the results container if input is empty
	        return;
	    }

	    // Display the results list if query is not empty
	    resultsContainer.style.display = "block";
	    
	    // Perform the filtering and render results
	    filterResults(query).then(renderResults);
	});

	// Optional: To hide the list when clicking outside (for better UX)
	document.addEventListener('click', function(event) {
	    if (!resultsContainer.contains(event.target) && event.target !== filterInput) {
	        resultsContainer.style.display = "none"; // Hide the results list if clicked outside
	    }
	});
	  var Overall = {
		        Overall: [150, 234, 703], // Data for January
		        
		    };
	  var Monthly = {
		        Monthly: [50, 60, 40], // Data for January
		        
		    };
	  var MWOverall = {
		        Overall: [70, 40, 10], // Data for January
		        
		    };
	  var MWMonthly = {
		        Monthly: [12, 25, 70], // Data for January
		        
		    };

	  function getRelativeMaxValue(array) {
		    const max = Math.max(...array.map(Number));
		    const buffer = Math.ceil(max * 0.1); // 10% buffer
		    return max + buffer;
		}

		    // Create charts for each month
		  setTimeout(() => {
        const janData = getMerchantChartData("jan", 0);
        const febData = getMerchantChartData("feb", 0);
        const marData = getMerchantChartData("mar", 0);
        const aprData = getMerchantChartData("apr", 0);

        updateChart('Overall', 'chart-bars-jan', janData);
        updateChart('Monthly', 'chart-bars-feb', febData);
        updateChart('Overall', 'chart-bars-mar', marData);
        updateChart('Monthly', 'chart-bars-apr', aprData);
    }, 100);


/* 		    // Initialize charts for each month
		    createChart('Overall', 'chart-bars-jan',Overall);
		    createChart('Monthly', 'chart-bars-feb',Monthly);
		    createChart('Overall', 'chart-bars-mar',MWOverall);
		    createChart('Monthly', 'chart-bars-apr',MWMonthly);	 */
	
    </script>
    
    

    
</body>
</html>